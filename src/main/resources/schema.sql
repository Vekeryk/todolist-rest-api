create table roles (id bigint generated by default as identity, name varchar(255) not null, primary key (id));
create table states (id bigint generated by default as identity, name varchar(255) not null, primary key (id));
create table tasks (id bigint generated by default as identity, name varchar(255) not null, priority varchar(255), state_id bigint, todo_id bigint, primary key (id));
create table todo_collaborator (collaborator_id bigint not null, todo_id bigint not null);
create table todos (id bigint generated by default as identity, created_at timestamp not null, title varchar(255) not null, owner_id bigint, primary key (id));
create table users (id bigint generated by default as identity, email varchar(255) not null, first_name varchar(255) not null, last_name varchar(255) not null, password varchar(255) not null, role_id bigint, primary key (id));
alter table roles add constraint UK_ofx66keruapi6vyqpv6f2or37 unique (name);
alter table states add constraint UK_nau09mwrvhjj0n0a6gfo5xmp3 unique (name);
alter table todos add constraint UK_c14g1nqfdaaixe1nyw25h3t0n unique (title);
alter table users add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email);
alter table tasks add constraint FKpm8o7r3k2d06eqaehxvdddfah foreign key (state_id) references states;
alter table tasks add constraint FKndwtm2u4rdwdvsox5x3ulo80p foreign key (todo_id) references todos;
alter table todo_collaborator add constraint FK2an385byaawdel6f0svpt1igp foreign key (todo_id) references todos;
alter table todo_collaborator add constraint FKgw0k0aw4m2ovpyfl30h2wmoxd foreign key (collaborator_id) references users;
alter table todos add constraint FKk1l4pem9qwnplbmfwhbsjoccs foreign key (owner_id) references users;
alter table users add constraint FKp56c1712k691lhsyewcssf40f foreign key (role_id) references roles;
